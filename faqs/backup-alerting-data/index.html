<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/wazuh-faqs/styles.fdfdfe63115c5f1a6a77.css" data-identity="gatsby-global-css">.button{border:0;border-radius:3px;color:#fff;font-size:.8em;margin:0 5px;padding:10px;transition:all .2s ease-in-out}.button,.button:hover:enabled{background-color:var(--color-primary);cursor:pointer}.button:disabled{background-color:grey;cursor:default}.button-primary,.button-primary:hover:enabled{background-color:var(--color-primary);color:#fff}.button-primary:hover:enabled{cursor:pointer}.callout{-webkit-filter:var(--callout-filter);filter:var(--callout-filter);font-size:var(--callout-font-size);padding:var(--callout-padding)}.callout-info{background-color:var(--callout-info-backgorund-color);border-left:var(--callout-border-size) var(--callout-border-type) var(--callout-info-border-color);color:var(--callout-info-color)}.callout-warning{background-color:var(--callout-warning-backgorund-color);border-left:var(--callout-border-size) var(--callout-border-type) var(--callout-warning-border-color);color:var(--callout-warning-color)}.callout-danger{background-color:var(--callout-danger-backgorund-color);border-left:var(--callout-border-size) var(--callout-border-type) var(--callout-danger-border-color);color:var(--callout-danger-color)}.card{border:1px solid var(--color-primary);border-radius:5px;padding:8px}.card:hover{box-shadow:0 0 2px var(--color-primary-shadow)}.card>.header{display:flex;justify-content:space-between}.card>.body{margin-top:4px}.card>.footer{align-items:center;display:flex;gap:.5rem;justify-content:space-between;margin-top:.5rem}.card>.body>.description{color:var(--color-subdued);font-size:.9em}.tooltip-wrapper{display:inline-block;position:relative}.tooltip-tip{background:var(--tooltip-background-color);border-radius:4px;color:var(--tooltip-text-color);font-family:sans-serif;font-size:14px;left:50%;line-height:1;padding:6px;position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);white-space:nowrap;z-index:100}.tooltip-tip:before{border:solid transparent;border-width:var(--tooltip-arrow-size);content:" ";height:0;left:50%;margin-left:calc(var(--tooltip-arrow-size)*-1);pointer-events:none;position:absolute;width:0}.tooltip-tip.top{top:calc(var(--tooltip-margin)*-1)}.tooltip-tip.top:before{border-top-color:var(--tooltip-background-color);top:100%}.tooltip-tip.right{left:calc(100% + var(--tooltip-margin))}.tooltip-tip.right,.tooltip-tip.right:before{top:50%;-webkit-transform:translateX(0) translateY(-50%);transform:translateX(0) translateY(-50%)}.tooltip-tip.right:before{border-right-color:var(--tooltip-background-color);left:calc(var(--tooltip-arrow-size)*-1)}.tooltip-tip.bottom{bottom:calc(var(--tooltip-margin)*-1)}.tooltip-tip.bottom:before{border-bottom-color:var(--tooltip-background-color);bottom:100%}.tooltip-tip.left{right:calc(100% + var(--tooltip-margin))}.tooltip-tip.left,.tooltip-tip.left:before{left:auto;top:50%;-webkit-transform:translateX(0) translateY(-50%);transform:translateX(0) translateY(-50%)}.tooltip-tip.left:before{border-left-color:var(--tooltip-background-color);right:calc(var(--tooltip-arrow-size)*-2)}.spacer-s{height:var(--spacer-s)}.spacer-m{height:var(--spacer-m)}.spacer-l{height:var(--spacer-l)}.input{padding:4px}.input[type=file]{display:none}:root{--color-primary:#2274a5;--color-primary-contrast:#fff;--color-primary-shadow:#131b23;--color-secondary:#e7dfc6;--color-secondary-contrast:#2274a5;--color-success:#ff0;--color-warning:#ff0;--color-error:#ff0;--color-link:green;--color-subdued:gray;--color-contrast:#131b23;--color-markdown-code:#d3d3d3;--color-faq-code:#dcdcdc;--spacer-s:5px;--spacer-m:12px;--spacer-l:18px;--tooltip-text-color:#fff;--tooltip-background-color:#000;--tooltip-margin:30px;--tooltip-arrow-size:6px;--callout-info-backgorund-color:#2274a5;--callout-info-border-color:blue;--callout-info-color:#fff;--callout-warning-backgorund-color:#ff0;--callout-warning-border-color:blue;--callout-warning-color:#fff;--callout-danger-backgorund-color:red;--callout-danger-border-color:blue;--callout-danger-color:#fff;--callout-border-size:0.2em;--callout-border-type:solid;--callout-padding:0.5em;--callout-font-size:0.8rem;--callout-filter:brightness(0.9);--card-test-ui-background-color:var(--color-primary);--card-test-ui-color:var(--color-primary-contrast);--card-test-backend-background-color:var(--color-secondary);--card-test-backend-color:var(--color-secondary-contrast)}body{color:#232129;font-family:Roboto,-apple-system,sans-serif,serif;margin:0}.layout_menu{background-color:var(--color-primary);height:3rem;margin-bottom:3rem;position:fixed;top:0;width:100%}.layout_menu>.layout_menu_links{align-items:center;display:flex;height:100%}.layout_menu_links a{color:var(--color-primary-contrast);margin:0 5px}.layout_main{margin-top:3rem;padding:16px}.layout_buttons{align-items:center;display:flex;justify-content:flex-end}.markdown code{background-color:var(--color-markdown-code);padding:2px}.faq{max-width:100%;padding:0 15%}.faq code{background-color:var(--color-faq-code);line-height:2em;white-space:break-spaces}.faq code,.tag{border-radius:3px}.tag{align-items:center;color:var(--color-primary);display:flex;font-size:.8em;justify-content:center;padding:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.color-primary-all{background-color:var(--color-primary);color:var(--color-primary-contrast)}.input{font-size:16px;padding:10px}.text-subdued{color:var(--color-subdued)}.table{border-collapse:collapse;font-family:arial,sans-serif;width:100%}.table td,.table th{border:1px solid var(--color-primary);padding:8px;text-align:left}.table thead,.table tr:nth-child(2n){background-color:var(--color-primary);color:var(--color-primary-contrast)}.table thead td{padding:12px 8px}.tabs:after{border-bottom:1px solid var(--color-primary);content:"";display:"block"!important;height:2px}.tabs ul{padding:0}.tabs li{color:var(--color-primary);display:inline;list-style:none;padding:5px 5px 2px}.tabs li.tab-selected{background-color:var(--color-primary);border-radius:3px;color:var(--color-primary-contrast)}.search-bar{align-items:center;display:flex;gap:.5rem}.search-bar .input{border:1px solid var(--color-primary);border-radius:.25rem;font-size:.9rem;padding:.5rem;width:100%}.apps-search-bar{align-items:center;display:flex;justify-content:center}.apps-layout{display:grid;gap:1.25rem;grid-auto-rows:auto;grid-template-columns:repeat(3,1fr);>.card{margin-bottom:0!important}}.card-test-ui{background-color:var(--card-test-ui-background-color);color:var(--card-test-ui-color)}.card-test-backend{background-color:var(--card-test-backend-background-color);color:var(--card-test-backend-color)}.cards{display:grid;gap:1.25rem;grid-auto-rows:auto;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));width:100%;>.card{margin-bottom:0!important}}.checkboxes{display:grid;gap:.5rem;grid-template-columns:repeat(auto-fill,minmax(160px,auto))}.container{display:flex;flex-direction:column;gap:.5rem}.m-xs{margin:4px}.m-s{margin:8px}.m-m{margin:4px}.m-l{margin:8px}.mt-xs,.my-xs{margin-top:4px}.mb-xs,.my-xs{margin-bottom:4px}.ml-xs,.mx-xs{margin-left:4px}.mr-xs,.mx-xs{margin-right:4px}.mt-s,.my-s{margin-top:8px}.mb-s,.my-s{margin-bottom:8px}.ml-s,.mx-s{margin-left:8px}.mr-s,.mx-s{margin-right:8px}.mt-m,.my-m{margin-top:12px}.mb-m,.my-m{margin-bottom:12px}.ml-m,.mx-m{margin-left:12px}.mr-m,.mx-m{margin-right:12px}.mt-l,.my-l{margin-top:16px}.mb-l,.my-l{margin-bottom:16px}.ml-l,.mx-l{margin-left:16px}.mr-l,.mx-l{margin-right:16px}.d-block{display:block}.d-flex{display:flex}.d-inline{display:inline}.d-inline-block{display:inline-block}.background-color-disabled{background-color:#dcdcdc}.cursor-pointer{cursor:pointer}.t-center{text-align:center}.color-subdued{color:var(--color-subdued)}input,textarea{padding:10px}.tags{display:flex;flex-wrap:wrap;gap:.25rem}</style><meta name="generator" content="Gatsby 3.8.1"/><link as="script" rel="preload" href="/wazuh-faqs/webpack-runtime-a8dc8a6130a16e818571.js"/><link as="script" rel="preload" href="/wazuh-faqs/framework-1f0ab9948a93cedbe3b5.js"/><link as="script" rel="preload" href="/wazuh-faqs/app-a7f2409eada534089f52.js"/><link as="script" rel="preload" href="/wazuh-faqs/component---src-pages-faqs-markdown-remark-frontmatter-slug-js-68747487d3076368c92b.js"/><link as="fetch" rel="preload" href="/wazuh-faqs/page-data/faqs/backup-alerting-data/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/wazuh-faqs/page-data/sq/d/1340339594.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/wazuh-faqs/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout_menu"><div class="layout_menu_links"><div style="display:flex;justify-content:space-between;align-items:center;width:100%"><div><a href="/wazuh-faqs/">Home</a><a href="/wazuh-faqs/apps">Apps</a><a style="color:black" href="/wazuh-faqs/faqs">FAQs</a><a href="/wazuh-faqs/dev-utils">Development utils</a></div></div></div></div><div class="layout_main"><div class="markdown faq"><h1 style="display:inline">Backup the data of Alerting applicaiton of Wazuh dashboard.</h1><div class="mb-s" style="position:fixed;bottom:10px;right:10px"><div><button class="button ">Copy remediation (in Markdown)</button></div></div><div class="tags"><span class="tag cursor-pointer background-color-disabled">alerting</span><span class="tag cursor-pointer background-color-disabled">backup</span><div class="spacer-m"></div></div><div class="color-subdued">Backup the data of Alerting applicaiton of Wazuh dashboard.</div><div class="spacer-m"></div><div class="faq-content"><h3>Issue</h3>
<p>Backup the data of Alerting applicaiton of Wazuh dashboard.</p>
<h3>Remediation</h3>
<p>The monitors and triggers of the Alerting application are stored into the <code>.opendistro-alerting-config</code> index according to this topic on the OpenSearch forum: <a href="https://forum.opensearch.org/t/back-up-of-alerting-monitors-destinations/959">https://forum.opensearch.org/t/back-up-of-alerting-monitors-destinations/959</a></p>
<p>List and check the existence of this index (<code>.opendistro-alerting-config</code>), run this request from the <code>Dev Tools</code> application of Wazuh dashboard:
<code>GET _cat/indices?expand_wildcards=all</code>
<img src="https://github.com/wazuh/community/assets/34042064/19b8eaf7-d57b-4e9f-9650-312bed215fe7" alt="image"></p>
<p>See the documents stored on the index, if this was configured as a system index, then you could need to run a request to the Wazuh indexer API using the admin certificates. Example:</p>
<pre><code class="language-wazuh-indexer@wazuh:~/certs$" data-meta="curl --cert admin.pem --key admin-key.pem --cacert ca.pem -u admin:SecretPassword https://localhost:9200/.opendistro-alerting-config/_search">{"took":2,"timed_out":false,"_shards":{"total":1,"successful":1,"skipped":0,"failed":0},"hits":{"total":{"value":2,"relation":"eq"},"max_score":1.0,"hits":[{"_index":".opendistro-alerting-config","_id":"1vU6JZABro-E19qk3yOH-metadata","_score":1.0,"_routing":"1vU6JZABro-E19qk3yOH","_source":{"metadata":{"monitor_id":"1vU6JZABro-E19qk3yOH","last_action_execution_times":[]}}},{"_index":".opendistro-alerting-config","_id":"1vU6JZABro-E19qk3yOH","_score":1.0,"_source":{"monitor":{"type":"monitor","schema_version":7,"name":"custom_monitor","monitor_type":"query_level_monitor","user":{"name":"admin","backend_roles":["admin"],"roles":["manage_wazuh_index","own_index","all_access"],"custom_attribute_names":[],"user_requested_tenant":null},"enabled":true,"enabled_time":1718611533558,"schedule":{"period":{"interval":1,"unit":"MINUTES"}},"inputs":[{"search":{"indices":["wazuh-alerts-*"],"query":{"size":0,"query":{"bool":{"filter":[{"range":{"@timestamp":{"from":"{{period_end}}||-1h","to":"{{period_end}}","include_lower":true,"include_upper":true,"format":"epoch_millis","boost":1.0}}}],"adjust_pure_negative":true,"boost":1.0}},"aggregations":{}}}}],"triggers":[{"query_level_trigger":{"id":"q8tuJZABD9pI-yvSsJEd","name":"custom_trigger","severity":"1","condition":{"script":{"source":"ctx.results[0].hits.total.value > 10000","lang":"painless"}},"actions":[]}}],"last_update_time":1718614929439,"ui_metadata":{"schedule":{"cronExpression":"0 */1 * * *","period":{"unit":"MINUTES","interval":1},"timezone":null,"daily":0,"monthly":{"type":"day","day":1},"weekly":{"tue":false,"wed":false,"thur":false,"sat":false,"fri":false,"mon":false,"sun":false},"frequency":"interval"},"search":{"searchType":"graph","bucketValue":1,"timeField":"@timestamp","bucketUnitOfTime":"h","groupBy":[],"filters":[],"aggregations":[]},"triggers":{"custom_trigger":{"value":10000,"enum":"ABOVE"}},"monitor_type":"query_level_monitor"},"data_sources":{"query_index":".opensearch-alerting-queries","findings_index":".opensearch-alerting-finding-history-write","findings_index_pattern":"&#x3C;.opensearch-alerting-finding-history-{now/d}-1>","alerts_index":".opendistro-alerting-alerts","alerts_history_index":".opendistro-alerting-alert-history-write","alerts_history_index_pattern":"&#x3C;.opendistro-alerting-alert-history-{now/d}-1>","query_index_mappings_by_type":{},"findings_enabled":false},"owner":"alerting"}}}]}}wazuh-indexer@wazuh:~/certs$ ```
> The `admin.pem`,  `admin-key.pem` and `ca.pem` can be found on the Wazuh indexer installation if you configured the security (it is enabled by default)

So, to backup the monitors and triggers of Alerting application of Wazuh dashboard, you need to create an snapshot of the `.opendistro-alerting-config`. It seems it could have others indices related to alerting, so you could need to backup these indices too depending on if you need the stored data or not. For example, in the shared screenshot, there is an index called `.opendistro-alerting-alerts`.
</code></pre></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/faqs/backup-alerting-data/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c36a95dc72563b2c65a2.js"],"app":["/app-a7f2409eada534089f52.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0c1ec93cb0824e8452b4.js"],"component---src-pages-apps-apps-json-slug-js":["/component---src-pages-apps-apps-json-slug-js-f08bacb352f5a8260b11.js"],"component---src-pages-apps-index-js":["/component---src-pages-apps-index-js-f348848906d774c0ee98.js"],"component---src-pages-daily-time-js":["/component---src-pages-daily-time-js-51dcd51b2fbac28c56c3.js"],"component---src-pages-dev-utils-index-js":["/component---src-pages-dev-utils-index-js-7b147f930ba2ff712a03.js"],"component---src-pages-dev-utils-tests-report-template-js":["/component---src-pages-dev-utils-tests-report-template-js-94078d507a88506a42c2.js"],"component---src-pages-faqs-index-js":["/component---src-pages-faqs-index-js-da8e57b3b3be28838849.js"],"component---src-pages-faqs-markdown-remark-frontmatter-slug-js":["/component---src-pages-faqs-markdown-remark-frontmatter-slug-js-68747487d3076368c92b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-352e21489361c9ee74b3.js"]};/*]]>*/</script><script src="/wazuh-faqs/polyfill-c36a95dc72563b2c65a2.js" nomodule=""></script><script src="/wazuh-faqs/component---src-pages-faqs-markdown-remark-frontmatter-slug-js-68747487d3076368c92b.js" async=""></script><script src="/wazuh-faqs/app-a7f2409eada534089f52.js" async=""></script><script src="/wazuh-faqs/framework-1f0ab9948a93cedbe3b5.js" async=""></script><script src="/wazuh-faqs/webpack-runtime-a8dc8a6130a16e818571.js" async=""></script></body></html>